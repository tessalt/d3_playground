<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>d3 Learnings</title>
  <script src="d3.v3/d3.v3.js"></script>
  <style>
  .axis path,
  .axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
  }

  .axis text {
    font-family: sans-serif;
    font-size: 11px;
  }
  </style>
</head>
<body>

<script type="text/javascript">

  var w = 600;
  var h = 250;
  var padding = 30;

  var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
                11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];

  var yScale = d3.scale.linear()
    .domain([0,d3.max(dataset, function(d){return d;})])
    .range([0, h]);

  var xScale = d3.scale.ordinal()
    .domain(d3.range(dataset.length))
    .rangeRoundBands([0, w], 0.05);

  var cRange = d3.scale.linear()
    .domain([0,d3.max(dataset, function(d){return d;})])
    .range([0, 0.9]);

  var svg = d3.select("body")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

  svg.selectAll("rect")
    .data(dataset)
    .enter()
    .append("rect")
    .attr("fill", function(d) {
      return "rgba(255,0,0," + cRange(d) + ")";
    })
    .attr("x", function(d,i){
      return xScale(i);
    })
    .attr("y", function(d){
      return h - yScale(d);
    })
    .attr("width", xScale.rangeBand())
    .attr("height", function(d){
      return yScale(d);
    });

  svg.selectAll("text")
    .data(dataset)
    .enter()
    .append("text")
    .text(function(d){
      return d;
    })
    .attr("font-size", "10px")
    .attr("font-family", "Arial")
    .attr ({
      fill: "white",
      x: function(d, i){return xScale(i) + (xScale.rangeBand()/2 -5);},
      y: function(d){return h - yScale(d) + 15; }
   });

</script>
</body>
</html>